<!DOCTYPE html>
<html>
<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.29/browser.js"></script>
	<script type="text/babel">
 
 let a = new Promise(
  function(resolve, reject) {
    console.log(1)
    setTimeout(() => console.log(2), 0)
    console.log(3)
    console.log(4)
    resolve(true)
  }
)
a.then(v => {
  console.log(8)
})

let b = new Promise(
  function() {
    console.log(5)
    setTimeout(() => console.log(6), 0)
  }
) 
console.log(7);

/** ******************************************************* **/
//  console.time("promise");
//  const getHttp = url =>{
//     return new Promise((resolve,reject) => {
//         Http.open("GET",url); 
//         Http.send();

//         Http.onreadystatechange = (e) =>{ 
//             console.log(e);
//             if(e.target.readyState == 4 && e.target.status == 200){
//                 resolve(e.target.responseText); 
//                 // console.log(e.target.responseText);
//             } else if(e.target.status == 404){
//                 reject(`The data not accessed successfully! e.target.readyState: ${e.target.readyState} , e.target.status ${e.target.status}`);
//             } 
//             console.timeEnd("promise");
//         }

//         Http.ontimeout = (e) =>{ 
//             reject(`The data not accessed successfully! e.target.readyState: ${e.target.readyState} , e.target.status ${e.target.status}`); 
//             console.timeEnd("promise");
//         }	

//     })
// }  
// getHttp(url).then(res => {
//     console.log("resolve: " + res);
// } , err=> {
//     console.log("reject: " + err);
// });  
/** ******************************************************* **/ 
// console.time("trandition");
// Http.open("GET",url); 
// Http.send();
// Http.onreadystatechange = (e) =>{ 
//     if(e.target.readyState == 4 && e.target.status == 200){ 
//         console.log('success!');
//         console.timeEnd("trandition");
//     } else if(e.target.status == 404){
//         console.log('default!');
//         console.timeEnd("trandition");
//     } 
// } 
/** ******************************************************* **/

// console.log('start');
// console.time('trandition');
// var calculator = count => {
// 	var temp = 0;
// 	for(var i = 0; i< count; i+= 0.0001){
// 		temp += i * i + (0.00213332) / -0.23242342 + i * 0.2222 * i * i + (0.00213332) / -0.23242342 + i * 0.2222 ;
// 	}
// 	return temp;
// } 
// var t = calculator(204202);
// console.log(t);
// console.timeEnd('trandition');
// console.log('end');

/** ******************************************************* **/
// console.log('start'); 
// var calculator = count => {
// 	var temp = 0;
// 	for(var i = 0; i< count; i+= 0.0001){
// 		temp += i * i + (0.00213332) / -0.23242342 + i * 0.2222 * i * i + (0.00213332) / -0.23242342 + i * 0.2222 ;
// 	}
// 	return temp;
// }   

// var calculatorPromise = count =>{
// 	return new Promise((resolve,reject) => {
// 		var result = calculator(count) 
// 		if(typeof(result) === 'number'){
// 			resolve("successful calculator get result = " + result);
// 		}else{
// 			reject("badly calculator!");
// 		}

// 		console.timeEnd('calculatorPromise');
// 	})
// }
// console.time('calculatorPromise');
// calculatorPromise(20420).then(
// 	result => {
// 		console.log( `then resolve:  ${result}`);
// 	}
// 	,
// 	fail => {
// 		console.log(` then reject: ${fail}`);
// 	}
// ); 
// console.log('end  ~~~~~~~~'); 
/** ******************************************************* **/ 
// console.log('start');
// const delay = seconds => {
// 	return new Promise((resolve,reject) => {
// 		if(typeof seconds !== 'number'){
// 			// reject(new Error("Argument seconds should be a number~!"))
// 			reject("Argument seconds should be a number~!");
// 		}
// 		setTimeout(
// 			() => resolve(`${seconds} second delay is up`),
// 			seconds * 1000
// 		); 
// })
// }
// delay(1).then(msg => console.log(msg));
// console.log("end");

/** ******************************************************* **/ 
// console.log('start');
// var delay = (seconds,callback) =>{
// 	setTimeout(callback, seconds);
// }

// delay(1,function(){
// 	console.log('callback');
// })
// console.log('end');
/** ******************************************************* **/ 
	
	// demo 1
	// const delay = seconds => {
	// 	return new Promise(resolve => {
	// 		setTimeout(resolve,seconds * 1000)
	// 	});
	// };
	// console.log("start");
	// delay(1).then(() => console.log("one second"));
	// delay(2).then(() => console.log("two second"));
	// delay(3).then(() => console.log("three second"));
	// delay(3).then(() => console.log("three2 second"));
 
	// demo 2

	// const delay2 = seconds => {
	// 	return new Promise((resolve,reject) => {
	// 		if(typeof seconds !== 'number'){
	// 			// reject(new Error("Argument seconds should be a number~!"))
	// 			reject("Argument seconds should be a number~!");
	// 		}
	// 		// setTimeout(
	// 		// 	() => resolve(`${seconds} second delay is up`),
	// 		// 	seconds * 1000
	// 		// );

	// 		resolve(`${seconds} second delay is up`)
	// 	});
	// };

	// delay2(1).then(msg => msg.toUpperCase())
	// 		 .then(msg => `${msg}~~~!!!!`)
	// 		 .then(msg => console.log(msg)) 
	// 		 .finally(console.log('finally~ delay 1 second!'));

	// delay2("10 Minuts").catch(msg => console.log('catch:' + msg))
	// 		 .finally(msg => console.log('finally~!'));
 
	// Promise.reject("Testing static reject").then(function(reason) {
	//   // 未被调用 
	// }, function(reason) {
	// 	console.log( reason); // "Testing static reject"
	// });

	// Promise.reject(new Error("fail")).then(function(result) {
	// // 未被调用
	// }, function(error) {
	// 	console.log("Error:"+ error); // stacktrace
	// });

	</script>
	<title>Promises</title>
</head>
<body>
</body>	
</html>






